<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Transcoder - AV1</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Video Transcoder</h1>
            <p class="subtitle">Convert your videos to any format</p>
        </header>

        <main>
            <!-- Upload Section -->
            <section id="upload-section" class="card">
                <h2>Upload Video</h2>
                <div class="upload-area" id="upload-area">
                    <input type="file" id="video-input" accept="video/*" hidden>
                    <div class="upload-content">
                        <span class="upload-icon">üìÅ</span>
                        <p>Click to select or drag and drop a video file</p>
                        <p class="upload-hint">Supported: MP4, AVI, MOV, MKV</p>
                    </div>
                </div>

                <!-- Transcoding Options -->
                <div id="options-section">
                    <div class="form-group-inline">
                        <input type="radio" id="default-settings" name="transcoding-mode" value="default" checked>
                        <label for="default-settings">Use default settings</label>
                    </div>
                    <div class="form-group-inline">
                        <input type="radio" id="custom-settings" name="transcoding-mode" value="custom">
                        <label for="custom-settings">Use custom settings</label>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Transcoding Options</h3>
                    <div id="custom-options-container" style="display: none;">
                        <div class="options-grid">
                            <div class="form-group">
                                <label for="video-codec">Video Codec</label>
                                <select id="video-codec" class="form-control">
                                    <option value="default">Default (h264)</option>
                                    <option value="h264">H.264 (libx264)</option>
                                    <option value="h265">H.265 (libx265)</option>
                                    <option value="av1">AV1 (libaom-av1)</option>
                                    <option value="vp9">VP9 (libvpx-vp9)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="resolution">Resolution</label>
                                <select id="resolution" class="form-control">
                                    <option value="default">Keep Original</option>
                                    <option value="auto">Auto-select Standard</option>
                                    <option value="480p">480p</option>
                                    <option value="720p">720p</option>
                                    <option value="1080p">1080p</option>
                                    <option value="1440p">1440p</option>
                                    <option value="4k">4K (2160p)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sharpening">Sharpening</label>
                                <select id="sharpening" class="form-control">
                                    <option value="none">None</option>
                                    <option value="light">Light</option>
                                    <option value="medium">Medium</option>
                                    <option value="strong">Strong</option>
                                    <option value="adaptive">Adaptive</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="container">Container</label>
                                <select id="container" class="form-control">
                                    <option value="default">Default (mp4)</option>
                                    <option value="mp4">MP4</option>
                                    <option value="mkv">MKV</option>
                                    <option value="avi">AVI</option>
                                    <option value="webm">WebM</option>
                                    <option value="mov">MOV</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="audio-codec">Audio Codec</label>
                                <select id="audio-codec" class="form-control">
                                    <option value="default">Default (aac)</option>
                                    <option value="copy">Copy Original</option>
                                    <option value="aac">AAC</option>
                                    <option value="mp3">MP3</option>
                                    <option value="opus">Opus</option>
                                    <option value="ac3">AC3</option>
                                    <option value="flac">FLAC (Lossless)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="crf">Video Quality</label>
                                <select id="crf" class="form-control">
                                    <option value="standard">Standard (CRF 23)</option>
                                    <option value="best">Best Quality (CRF 20)</option>
                                    <option value="low">Low Quality (CRF 27)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <button id="upload-btn" class="btn btn-primary" disabled>Upload & Transcode</button>
            </section>

            <!-- Progress Section -->
            <section id="progress-section" class="card" style="display: none;">
                <h2>Transcoding Progress</h2>
                <div class="job-info">
                    <p><strong>File:</strong> <span id="job-filename">-</span></p>
                    <p><strong>Job ID:</strong> <span id="job-id">-</span></p>
                    <p><strong>Status:</strong> <span id="job-status" class="status-badge">-</span></p>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill">0%</div>
                </div>
                <button id="download-btn" class="btn btn-success" style="display: none;">Download Transcoded Video</button>
                <button id="new-job-btn" class="btn btn-secondary" style="display: none;">Transcode Another Video</button>
            </section>

            <!-- Jobs List Section -->
            <section id="jobs-section" class="card">
                <div class="section-header">
                    <h2>Recent Jobs</h2>
                    <button id="refresh-jobs-btn" class="btn btn-small">üîÑ Refresh</button>
                </div>
                <div id="jobs-list" class="jobs-list">
                    <p class="empty-state">No jobs yet. Upload a video to get started!</p>
                </div>
            </section>
        </main>

        <footer>
            <p>Built with FastAPI + FFmpeg | Phase 1: Local Transcoder</p>
        </footer>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>